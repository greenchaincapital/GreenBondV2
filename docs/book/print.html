<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>GreenBond Docs</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item "><a href="PROJECT_FINANCE.html">Project Finance</a></li><li class="chapter-item "><a href="XSTRUCTURE.html">XStructure</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="src/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/interfaces/IL2Encoder.sol/interface.IL2Encoder.html">IL2Encoder</a></li><li class="chapter-item "><a href="src/interfaces/IL2Pool.sol/interface.IL2Pool.html">IL2Pool</a></li></ol></li><li class="chapter-item "><a href="src/GreenBondV2.sol/contract.GreenBondV2.html">GreenBondV2</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">GreenBond Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/greenchaincapital/GreenBondV2" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="green-bond-v2"><a class="header" href="#green-bond-v2">Green Bond V2 <img src="https://github.com/greenchaincapital/GreenBondV2/actions/workflows/test.yml/badge.svg?branch=main" alt="Foundry" /></a></h1>
<h3 id="green-bond-contract-on-arbitrum-erc4626-compatible"><a class="header" href="#green-bond-contract-on-arbitrum-erc4626-compatible">Green Bond Contract on Arbitrum (<a href="https://ethereum.org/en/developers/docs/standards/tokens/erc-4626/">ERC4626 compatible</a>)</a></h3>
<h3 id="deployed-at-0xd24644ca8cb5d67e776291b37896bc3d557a47b8"><a class="header" href="#deployed-at-0xd24644ca8cb5d67e776291b37896bc3d557a47b8">Deployed at <a href="https://arbiscan.io/address/0xd24644ca8cb5d67e776291b37896bc3d557a47b8">0xD24644Ca8cB5D67E776291b37896Bc3D557A47B8</a></a></h3>
<h2 id="greenbond-v2-summary"><a class="header" href="#greenbond-v2-summary">GreenBond V2 Summary</a></h2>
<p>GreenBond V2 contract builds upon <a href="https://github.com/greenchaincapital/GreenBond">GreenBond</a> with the following features:</p>
<ul>
<li>Fully ERC4626 compatible</li>
<li>Aave passive income instead of Curve
<ul>
<li>Simplified interfacing (more robust and secure)</li>
<li>Better rate of return (currently ~10% APR for Aave as opposed to ~6% for Curve)</li>
<li>Automatic rewards as opposed to claiming processes</li>
</ul>
</li>
</ul>
<p>Overrall design to provide stable returns for renewable energy project financing, in the form of a stablecoin (USDT) bond. It enforces a minimum lock-up period (3-6 months) for deposited assets, in order to establish new projects' active income. Passive income is earned through Aave lending.</p>
<p>Green energy projects are registered for asset deployment. Master contract agreements are publically linked for transparency and accountability of operations. Income is received from these projects to pay dividends to investors. </p>
<h3 id="interaction-between-greenbond-and-projects"><a class="header" href="#interaction-between-greenbond-and-projects">Interaction Between GreenBond and Projects:</a></h3>
<ul>
<li>
<p>Reward Accumulation: Users deposit stablecoins (USDT) into the GreenBond contract to earn rewards over time. These rewards are automatically accumulated, based on both passive income from Aave lending and active income from active projects.</p>
</li>
<li>
<p>Income Receipt: The Projects generate income for the investors either in a fixed payment agreement or through re-sale of the project.</p>
</li>
<li>
<p>Supplier Payment: The GreenBond contract, under governance control, can pay the registered project admin. Governance initiates the payment by calling the payProject function, specifying the project details.</p>
</li>
<li>
<p>Activation and Completion: Each project can be activated by governance, marking the start of the payment process. Once the term of the agreement is over, the company can complete the project by calling the completeProject function.</p>
</li>
<li>
<p>Governance Control: The GreenBond contract is under governance control, allowing designated addresses to manage contract parameters, such as the fixed interest rate, lock-up period, and governance address.</p>
</li>
</ul>
<p>By combining the features of the GreenBond and project finance agreements, investors can earn rewards for providing liquidity, while the contract benefits from a flexible payment processing solution that supports income receipt, project payments, and project completion.</p>
<h2 id="project-finance-operations"><a class="header" href="#project-finance-operations">Project Finance Operations</a></h2>
<ul>
<li><a href="PROJECT_FINANCE.html">Project Finance</a></li>
<li><a href="XSTRUCTURE.html">XStructure</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="renewable-energy-project-finance-a-comprehensive-guide"><a class="header" href="#renewable-energy-project-finance-a-comprehensive-guide">Renewable Energy Project Finance: A Comprehensive Guide</a></h1>
<p>Renewable energy is a key component of the global effort to combat climate change and reduce reliance on fossil fuels. However, developing and implementing renewable energy projects requires substantial investment and careful financial planning. In this article, we will delve into the intricacies of renewable energy project finance, exploring the key concepts and strategies that drive the funding of these sustainable initiatives.</p>
<h2 id="introduction-to-renewable-energy-project-finance"><a class="header" href="#introduction-to-renewable-energy-project-finance">Introduction to Renewable Energy Project Finance</a></h2>
<p>Renewable energy project finance is the process of securing the necessary capital to plan, construct, and operate renewable energy projects. These projects can encompass a wide range of technologies, including solar, wind, hydroelectric, geothermal, and biomass energy. The success of these projects relies on a well-structured financial plan, which must take into account several critical factors.</p>
<h2 id="key-elements-of-renewable-energy-project-finance"><a class="header" href="#key-elements-of-renewable-energy-project-finance">Key Elements of Renewable Energy Project Finance</a></h2>
<h3 id="1-project-structuring"><a class="header" href="#1-project-structuring">1. Project Structuring</a></h3>
<p>The first step in financing a renewable energy project is to establish a clear project structure. This involves defining the technology to be used, project location, size, and the expected energy output. Project structuring also includes setting up special purpose vehicles (SPVs) or legal entities dedicated to the project. SPVs are crucial for ring-fencing the project from other corporate assets and liabilities.</p>
<h3 id="2-financing-sources"><a class="header" href="#2-financing-sources">2. Financing Sources</a></h3>
<p>There are various sources of financing for renewable energy projects, including:</p>
<ul>
<li>
<p><strong>Debt Financing</strong>: This involves securing loans or bonds to fund the project. Debt financing can come from banks, financial institutions, or bonds issued in the capital market.</p>
</li>
<li>
<p><strong>Equity Financing</strong>: Investors provide equity capital in exchange for ownership stakes in the project. These investors can include private equity firms, venture capitalists, or public shareholders.</p>
</li>
<li>
<p><strong>Grants and Subsidies</strong>: Government incentives and grants can significantly reduce the financial burden of renewable energy projects.</p>
</li>
<li>
<p><strong>Tax Equity Financing</strong>: Tax benefits are often used to attract investors by offering tax credits and deductions associated with renewable energy projects.</p>
</li>
</ul>
<h3 id="3-power-purchase-agreements-ppas"><a class="header" href="#3-power-purchase-agreements-ppas">3. Power Purchase Agreements (PPAs)</a></h3>
<p>PPAs are long-term contracts that secure a buyer for the energy generated by the project. These agreements are crucial for assuring revenue streams and attracting investors. PPAs can be structured as fixed-price, escalating price, or indexed to inflation.</p>
<h3 id="4-risk-mitigation"><a class="header" href="#4-risk-mitigation">4. Risk Mitigation</a></h3>
<p>Renewable energy projects involve various risks, including technology risk, regulatory risk, and market risk. Effective risk management strategies, such as insurance, hedges, and contractual agreements, are essential to provide confidence to investors and lenders.</p>
<h3 id="5-financial-models"><a class="header" href="#5-financial-models">5. Financial Models</a></h3>
<p>Developing comprehensive financial models is crucial to assess the economic viability of the project. These models include cash flow projections, sensitivity analysis, and scenario planning to account for variables like energy prices, operating costs, and project timelines.</p>
<h2 id="renewable-energy-project-finance-process"><a class="header" href="#renewable-energy-project-finance-process">Renewable Energy Project Finance Process</a></h2>
<p>The process of financing a renewable energy project typically follows these steps:</p>
<ol>
<li>
<p><strong>Project Origination</strong>: Identifying suitable project locations and technologies.</p>
</li>
<li>
<p><strong>Pre-Feasibility Study</strong>: Conducting initial studies to determine the project's economic feasibility.</p>
</li>
<li>
<p><strong>Project Structuring</strong>: Creating a legal entity, securing permits, and designing the project.</p>
</li>
<li>
<p><strong>Financial Planning</strong>: Determining the optimal mix of financing sources and creating financial models.</p>
</li>
<li>
<p><strong>Fundraising</strong>: Attracting investors and securing loans or grants.</p>
</li>
<li>
<p><strong>Construction and Commissioning</strong>: Building the project according to the design.</p>
</li>
<li>
<p><strong>Operations and Maintenance</strong>: Ensuring the project operates efficiently and profitably.</p>
</li>
<li>
<p><strong>Monitoring and Reporting</strong>: Regularly evaluating project performance against financial models.</p>
</li>
<li>
<p><strong>Exit Strategy</strong>: Determining when and how investors can exit the project with returns.</p>
</li>
</ol>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>Renewable energy project finance is a complex and multifaceted process that requires careful planning and a deep understanding of financial instruments, risks, and market dynamics. As the world continues to shift towards sustainable energy sources, the ability to secure the necessary financing for renewable projects becomes increasingly critical. By following the principles outlined in this article, project developers and investors can work together to drive the growth of renewable energy and combat climate change.</p>
<p><em>Disclaimer: This article provides a high-level overview of renewable energy project finance. Specific projects may have unique characteristics and requirements. It is advisable to consult with financial experts and legal advisors for detailed guidance on your specific project.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="xstructure---project-finance-operator-workflow"><a class="header" href="#xstructure---project-finance-operator-workflow">Xstructure - Project Finance Operator Workflow</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Xstructure is responsible for managing and operating the <code>GreenBondV2</code> contract, which serves as an ERC4626 Vault on Arbitrum for the GreenBond project. This technical workflow outlines the key roles and operations that Xstructure performs as a project finance operator for the GreenBond DeFi platform.</p>
<h2 id="key-roles-and-operations"><a class="header" href="#key-roles-and-operations">Key Roles and Operations</a></h2>
<h3 id="1-initial-setup"><a class="header" href="#1-initial-setup">1. Initial Setup</a></h3>
<p>Xstructure's role as a project finance operator begins with the initial setup of the <code>GreenBondV2</code> contract. This setup involves deploying the contract and configuring various parameters, such as the lockup period, asset addresses, Aave pool, and encoder.</p>
<h3 id="2-governance"><a class="header" href="#2-governance">2. Governance</a></h3>
<p>As a project finance operator, Xstructure has governance control over the contract. This control includes the ability to make critical decisions and changes. Key governance-related operations include:</p>
<ul>
<li>
<p><strong>Changing Lockup Period</strong>: Xstructure can modify the lockup period as needed to align with project requirements.</p>
</li>
<li>
<p><strong>Adding and Removing Governance Addresses</strong>: Xstructure can add or remove addresses from the governance list to grant or revoke control over contract parameters.</p>
</li>
<li>
<p><strong>Recovering Tokens</strong>: In cases where token recovery is necessary, Xstructure can initiate the transfer of tokens from the contract to a designated receiver.</p>
</li>
</ul>
<h3 id="3-project-management"><a class="header" href="#3-project-management">3. Project Management</a></h3>
<p>Xstructure plays a pivotal role in managing and supervising projects that interact with the GreenBond platform. Project management operations include:</p>
<ul>
<li>
<p><strong>Registering Projects</strong>: Xstructure can register new projects by specifying project administrators and project names. This step initiates the project's interaction with the GreenBond platform.</p>
</li>
<li>
<p><strong>Linking Project Agreements</strong>: Xstructure can link project agreements by associating project IDs with master agreements. This ensures that project-related agreements are stored securely on the blockchain.</p>
</li>
<li>
<p><strong>Completing Projects</strong>: When a project has successfully repaid its deployed assets, Xstructure can mark the project as completed.</p>
</li>
<li>
<p><strong>Paying Projects</strong>: Xstructure has the authority to pay projects by transferring assets to the project administrators. This action activates the project and increases the total assets supplied to that project.</p>
</li>
<li>
<p><strong>Receiving Income</strong>: Xstructure handles the reception of income from projects. Income received is then distributed to the project's address, effectively repaying the assets.</p>
</li>
</ul>
<h3 id="4-master-agreement-preparation"><a class="header" href="#4-master-agreement-preparation">4. Master Agreement Preparation</a></h3>
<p>One of Xstructure's critical responsibilities as a project finance operator is to facilitate the creation and preparation of the master agreement for each project. The master agreement serves as a binding contract that formalizes the relationship between the project, the GreenBond platform, and the bondholders. It establishes the terms and conditions under which the project's assets and revenue rights are tied to the bond. Here's an overview of the master agreement preparation process:</p>
<ul>
<li>
<p><strong>Project-Specific Terms</strong>: Xstructure collaborates with the project administrators to define project-specific terms within the master agreement. These terms may include the duration of the project, the asset lockup period, revenue-sharing arrangements, and any special conditions that pertain to the project.</p>
</li>
<li>
<p><strong>Legal Compliance</strong>: Xstructure ensures that the master agreement complies with all relevant legal and regulatory requirements. This may involve consulting with legal experts to draft or review the agreement to ensure it adheres to local and international laws.</p>
</li>
<li>
<p><strong>Asset Lockup Period</strong>: The master agreement explicitly outlines the asset lockup period, which may range from 3 to 6 months. During this period, the project's assets are locked, and revenue is accrued, further securing bondholders' investments.</p>
</li>
<li>
<p><strong>Revenue Distribution</strong>: The master agreement defines how revenue generated by the project is distributed. This may include specifying the percentage of revenue allocated to bondholders, project expenses, and the project's administrators.</p>
</li>
<li>
<p><strong>Rights and Obligations</strong>: The agreement outlines the rights and obligations of all parties involved, including the project administrators, GreenBond platform, and bondholders. It clearly defines the responsibilities and expectations of each party.</p>
</li>
<li>
<p><strong>Performance Metrics</strong>: To ensure transparency and accountability, the master agreement may include performance metrics and reporting requirements. These metrics are used to track the project's progress and assess its financial health.</p>
</li>
<li>
<p><strong>Dispute Resolution</strong>: In the event of disputes or disagreements, the master agreement outlines a clear dispute resolution process. This process helps in resolving issues and maintaining the integrity of the bond.</p>
</li>
<li>
<p><strong>Amendments and Updates</strong>: The agreement may specify the process for making amendments or updates to the terms and conditions. This ensures that the agreement can adapt to changing circumstances or project developments.</p>
</li>
<li>
<p><strong>Signing and Execution</strong>: Once the master agreement is drafted, it is reviewed and signed by all relevant parties, including project administrators, bondholders, and the GreenBond platform. The agreement becomes legally binding upon execution.</p>
</li>
</ul>
<p>By meticulously preparing the master agreement, Xstructure helps establish a secure and transparent framework that ties the project's assets and revenue rights to the bond. This agreement ensures that all parties involved are aware of their rights and responsibilities, ultimately fostering trust and confidence in the GreenBond platform and its mission to support renewable energy initiatives.</p>
<h2 id="conclusion-1"><a class="header" href="#conclusion-1">Conclusion</a></h2>
<p>Xstructure plays a critical role in managing and operating the <code>GreenBondV2</code> contract as a project finance operator. Their responsibilities include governance, project management, and asset management, all of which are vital for the success and sustainability of the GreenBond DeFi platform. Through these operations, Xstructure contributes to the growth and stability of the DeFi green bond project, furthering its mission to support renewable energy initiatives.</p>
<p><em>Disclaimer: The technical workflow presented here is a high-level overview of Xstructure's role and operations as a project finance operator for the GreenBond project. Actual workflows may vary depending on specific project requirements and contractual agreements.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="src/interfaces/IL2Encoder.sol/interface.IL2Encoder.html">IL2Encoder</a></li>
<li><a href="src/interfaces/IL2Pool.sol/interface.IL2Pool.html">IL2Pool</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="il2encoder"><a class="header" href="#il2encoder">IL2Encoder</a></h1>
<p><a href="https://github.com/greenchaincapital/GreenBondV2/blob/51a1807f93a4bb92129f4cca023d319c78973c0c/src/interfaces/IL2Encoder.sol">Git Source</a></p>
<p><strong>Author:</strong>
Aave</p>
<p>Defines the basic extension interface for an L2 Aave Encoder.</p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="encodesupplyparams"><a class="header" href="#encodesupplyparams">encodeSupplyParams</a></h3>
<pre><code class="language-solidity">function encodeSupplyParams(address asset, uint256 amount, uint16 referralCode) external view returns (bytes32);
</code></pre>
<h3 id="encodesupplywithpermit"><a class="header" href="#encodesupplywithpermit">encodeSupplyWithPermit</a></h3>
<pre><code class="language-solidity">function encodeSupplyWithPermit(address asset, uint256 amount, uint16 referralCode, uint256 deadline, uint8 permitV, bytes32 permitR, bytes32 permitS)
    external
    view
    returns (bytes32, bytes32, bytes32);
</code></pre>
<h3 id="encodewithdrawparams"><a class="header" href="#encodewithdrawparams">encodeWithdrawParams</a></h3>
<pre><code class="language-solidity">function encodeWithdrawParams(address asset, uint256 amount) external view returns (bytes32);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="il2pool"><a class="header" href="#il2pool">IL2Pool</a></h1>
<p><a href="https://github.com/greenchaincapital/GreenBondV2/blob/51a1807f93a4bb92129f4cca023d319c78973c0c/src/interfaces/IL2Pool.sol">Git Source</a></p>
<p><strong>Author:</strong>
Aave</p>
<p>Defines the basic extension interface for an L2 Aave Pool.</p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="supply"><a class="header" href="#supply">supply</a></h3>
<p>Calldata efficient wrapper of the supply function on behalf of the caller</p>
<p><em>the shortenedAmount is cast to 256 bits at decode time, if type(uint128).max the value will be expanded to
type(uint256).max</em></p>
<p><em>assetId is the index of the asset in the reservesList.</em></p>
<pre><code class="language-solidity">function supply(bytes32 args) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>args</code></td><td><code>bytes32</code></td><td>Arguments for the supply function packed in one bytes32 96 bits       16 bits         128 bits      16 bits</td></tr>
</tbody></table>
</div>
<h3 id="supplywithpermit"><a class="header" href="#supplywithpermit">supplyWithPermit</a></h3>
<p>Calldata efficient wrapper of the supplyWithPermit function on behalf of the caller</p>
<p><em>the shortenedAmount is cast to 256 bits at decode time, if type(uint128).max the value will be expanded to
type(uint256).max</em></p>
<p><em>assetId is the index of the asset in the reservesList.</em></p>
<pre><code class="language-solidity">function supplyWithPermit(bytes32 args, bytes32 r, bytes32 s) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>args</code></td><td><code>bytes32</code></td><td>Arguments for the supply function packed in one bytes32 56 bits    8 bits         32 bits           16 bits         128 bits      16 bits</td></tr>
<tr><td><code>r</code></td><td><code>bytes32</code></td><td>The R parameter of ERC712 permit sig</td></tr>
<tr><td><code>s</code></td><td><code>bytes32</code></td><td>The S parameter of ERC712 permit sig</td></tr>
</tbody></table>
</div>
<h3 id="withdraw"><a class="header" href="#withdraw">withdraw</a></h3>
<p>Calldata efficient wrapper of the withdraw function, withdrawing to the caller</p>
<p><em>the shortenedAmount is cast to 256 bits at decode time, if type(uint128).max the value will be expanded to
type(uint256).max</em></p>
<p><em>assetId is the index of the asset in the reservesList.</em></p>
<pre><code class="language-solidity">function withdraw(bytes32 args) external returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>args</code></td><td><code>bytes32</code></td><td>Arguments for the withdraw function packed in one bytes32 112 bits       128 bits      16 bits</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The final amount withdrawn</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="greenbondv2"><a class="header" href="#greenbondv2">GreenBondV2</a></h1>
<p><a href="https://github.com/greenchaincapital/GreenBondV2/blob/51a1807f93a4bb92129f4cca023d319c78973c0c/src/GreenBondV2.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC4626</p>
<p><strong>Author:</strong>
@sandybradley</p>
<p>ERC4626 Vault on Arbitrum, wth USDT as asset and Aave as passive income lockup.
Active income is earned through project payouts, financed by deployed assets.
Time weighted asset lockup period of 3-6 months applies to enable the above.</p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="asset"><a class="header" href="#asset">ASSET</a></h3>
<p>USDT on arbitrum</p>
<pre><code class="language-solidity">ERC20 internal constant ASSET = ERC20(0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9);
</code></pre>
<h3 id="aave_asset"><a class="header" href="#aave_asset">AAVE_ASSET</a></h3>
<p>aUSDT on arbitrum</p>
<pre><code class="language-solidity">ERC20 public constant AAVE_ASSET = ERC20(0x6ab707Aca953eDAeFBc4fD23bA73294241490620);
</code></pre>
<h3 id="pool"><a class="header" href="#pool">POOL</a></h3>
<p>Aave pool on arbitrum (proxy)</p>
<pre><code class="language-solidity">IL2Pool public constant POOL = IL2Pool(0x794a61358D6845594F94dc1DB02A252b5b4814aD);
</code></pre>
<h3 id="encoder"><a class="header" href="#encoder">ENCODER</a></h3>
<p>Aave encoder on arbitrum</p>
<pre><code class="language-solidity">IL2Encoder public constant ENCODER = IL2Encoder(0x9abADECD08572e0eA5aF4d47A9C7984a5AA503dC);
</code></pre>
<h3 id="lockup"><a class="header" href="#lockup">LOCKUP</a></h3>
<p>Deposit lockup time, default 3 months</p>
<pre><code class="language-solidity">uint64 public LOCKUP = 3 * 30 days;
</code></pre>
<h3 id="deployed_assets"><a class="header" href="#deployed_assets">DEPLOYED_ASSETS</a></h3>
<p>Transient tokens deployed to project (~ 6 months lock-up)</p>
<pre><code class="language-solidity">uint256 public DEPLOYED_ASSETS;
</code></pre>
<h3 id="total_deployed_assets"><a class="header" href="#total_deployed_assets">TOTAL_DEPLOYED_ASSETS</a></h3>
<p>Total assets deployed to projects</p>
<pre><code class="language-solidity">uint256 public TOTAL_DEPLOYED_ASSETS;
</code></pre>
<h3 id="total_repaid_assets"><a class="header" href="#total_repaid_assets">TOTAL_REPAID_ASSETS</a></h3>
<p>Total assets paid by projects</p>
<pre><code class="language-solidity">uint256 public TOTAL_REPAID_ASSETS;
</code></pre>
<h3 id="gov"><a class="header" href="#gov">GOV</a></h3>
<p>Governance addresses</p>
<pre><code class="language-solidity">mapping(address =&gt; bool) public GOV;
</code></pre>
<h3 id="deposittimestamps"><a class="header" href="#deposittimestamps">depositTimestamps</a></h3>
<p>Time weighted average lockup time per address</p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public depositTimestamps;
</code></pre>
<h3 id="projectcount"><a class="header" href="#projectcount">projectCount</a></h3>
<pre><code class="language-solidity">uint256 public projectCount;
</code></pre>
<h3 id="projects"><a class="header" href="#projects">projects</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; Project) public projects;
</code></pre>
<h3 id="rewards"><a class="header" href="#rewards">rewards</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; uint256) internal rewards;
</code></pre>
<h3 id="lastclaimtimestamps"><a class="header" href="#lastclaimtimestamps">lastClaimTimestamps</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; uint256) internal lastClaimTimestamps;
</code></pre>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor() ERC4626(ASSET, &quot;GreenBondV2&quot;, &quot;gBOND2&quot;);
</code></pre>
<h3 id="_govcheck"><a class="header" href="#_govcheck">_govCheck</a></h3>
<pre><code class="language-solidity">function _govCheck() internal view;
</code></pre>
<h3 id="changelockup"><a class="header" href="#changelockup">changeLockup</a></h3>
<pre><code class="language-solidity">function changeLockup(uint64 newLockup) external;
</code></pre>
<h3 id="addgov"><a class="header" href="#addgov">addGov</a></h3>
<pre><code class="language-solidity">function addGov(address newGov) external;
</code></pre>
<h3 id="removegov"><a class="header" href="#removegov">removeGov</a></h3>
<pre><code class="language-solidity">function removeGov(address oldGov) external;
</code></pre>
<h3 id="recovertoken"><a class="header" href="#recovertoken">recoverToken</a></h3>
<pre><code class="language-solidity">function recoverToken(address token, address receiver, uint256 tokenAmount) external;
</code></pre>
<h3 id="registerproject"><a class="header" href="#registerproject">registerProject</a></h3>
<pre><code class="language-solidity">function registerProject(address projectAdmin, string calldata projectName) external returns (uint256);
</code></pre>
<h3 id="linkprojectagreement"><a class="header" href="#linkprojectagreement">linkProjectAgreement</a></h3>
<pre><code class="language-solidity">function linkProjectAgreement(uint256 projectId, string calldata masterAgreement) external;
</code></pre>
<h3 id="completeproject"><a class="header" href="#completeproject">completeProject</a></h3>
<pre><code class="language-solidity">function completeProject(uint256 projectId) external;
</code></pre>
<h3 id="payproject"><a class="header" href="#payproject">payProject</a></h3>
<pre><code class="language-solidity">function payProject(uint256 assets, uint256 projectId) external;
</code></pre>
<h3 id="receiveincome"><a class="header" href="#receiveincome">receiveIncome</a></h3>
<pre><code class="language-solidity">function receiveIncome(uint256 assets, uint256 projectId) external;
</code></pre>
<h3 id="totalassets"><a class="header" href="#totalassets">totalAssets</a></h3>
<pre><code class="language-solidity">function totalAssets() public view virtual override returns (uint256);
</code></pre>
<h3 id="deposit"><a class="header" href="#deposit">deposit</a></h3>
<pre><code class="language-solidity">function deposit(uint256 assets, address receiver) public virtual override returns (uint256 shares);
</code></pre>
<h3 id="mint"><a class="header" href="#mint">mint</a></h3>
<pre><code class="language-solidity">function mint(uint256 shares, address receiver) public virtual override returns (uint256 assets);
</code></pre>
<h3 id="withdraw-1"><a class="header" href="#withdraw-1">withdraw</a></h3>
<pre><code class="language-solidity">function withdraw(uint256 assets, address receiver, address owner) public virtual override returns (uint256 shares);
</code></pre>
<h3 id="redeem"><a class="header" href="#redeem">redeem</a></h3>
<pre><code class="language-solidity">function redeem(uint256 shares, address receiver, address owner) public virtual override returns (uint256 assets);
</code></pre>
<h3 id="transfer"><a class="header" href="#transfer">transfer</a></h3>
<pre><code class="language-solidity">function transfer(address to, uint256 amount) public virtual override returns (bool success);
</code></pre>
<h3 id="transferfrom"><a class="header" href="#transferfrom">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address from, address to, uint256 amount) public virtual override returns (bool success);
</code></pre>
<h3 id="beforewithdraw"><a class="header" href="#beforewithdraw">beforeWithdraw</a></h3>
<pre><code class="language-solidity">function beforeWithdraw(uint256 assets, uint256) internal virtual override;
</code></pre>
<h3 id="afterdeposit"><a class="header" href="#afterdeposit">afterDeposit</a></h3>
<pre><code class="language-solidity">function afterDeposit(uint256 assets, uint256) internal virtual override;
</code></pre>
<h3 id="_updatedeposittimestamp"><a class="header" href="#_updatedeposittimestamp">_updateDepositTimestamp</a></h3>
<pre><code class="language-solidity">function _updateDepositTimestamp(address account, uint256 shares) internal;
</code></pre>
<h3 id="_updatetransfertimestamp"><a class="header" href="#_updatetransfertimestamp">_updateTransferTimestamp</a></h3>
<pre><code class="language-solidity">function _updateTransferTimestamp(address account, uint256 shares) internal;
</code></pre>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="governoradded"><a class="header" href="#governoradded">GovernorAdded</a></h3>
<pre><code class="language-solidity">event GovernorAdded(address newGov);
</code></pre>
<h3 id="governorremoved"><a class="header" href="#governorremoved">GovernorRemoved</a></h3>
<pre><code class="language-solidity">event GovernorRemoved(address oldGov);
</code></pre>
<h3 id="paidproject"><a class="header" href="#paidproject">PaidProject</a></h3>
<pre><code class="language-solidity">event PaidProject(address admin, uint256 amount, uint256 projectId);
</code></pre>
<h3 id="receivedincome"><a class="header" href="#receivedincome">ReceivedIncome</a></h3>
<pre><code class="language-solidity">event ReceivedIncome(address indexed sender, uint256 assets, uint256 projectId);
</code></pre>
<h3 id="projectregistered"><a class="header" href="#projectregistered">ProjectRegistered</a></h3>
<pre><code class="language-solidity">event ProjectRegistered(uint256 indexed project);
</code></pre>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="insufficientasset"><a class="header" href="#insufficientasset">InsufficientAsset</a></h3>
<pre><code class="language-solidity">error InsufficientAsset();
</code></pre>
<h3 id="insufficientliquidity"><a class="header" href="#insufficientliquidity">InsufficientLiquidity</a></h3>
<pre><code class="language-solidity">error InsufficientLiquidity();
</code></pre>
<h3 id="insufficientbalance"><a class="header" href="#insufficientbalance">InsufficientBalance</a></h3>
<pre><code class="language-solidity">error InsufficientBalance();
</code></pre>
<h3 id="insufficientallowance"><a class="header" href="#insufficientallowance">InsufficientAllowance</a></h3>
<pre><code class="language-solidity">error InsufficientAllowance();
</code></pre>
<h3 id="unknowntoken"><a class="header" href="#unknowntoken">UnknownToken</a></h3>
<pre><code class="language-solidity">error UnknownToken();
</code></pre>
<h3 id="zeroshares"><a class="header" href="#zeroshares">ZeroShares</a></h3>
<pre><code class="language-solidity">error ZeroShares();
</code></pre>
<h3 id="zeroamount"><a class="header" href="#zeroamount">ZeroAmount</a></h3>
<pre><code class="language-solidity">error ZeroAmount();
</code></pre>
<h3 id="zeroaddress"><a class="header" href="#zeroaddress">ZeroAddress</a></h3>
<pre><code class="language-solidity">error ZeroAddress();
</code></pre>
<h3 id="overflow"><a class="header" href="#overflow">Overflow</a></h3>
<pre><code class="language-solidity">error Overflow();
</code></pre>
<h3 id="identicaladdresses"><a class="header" href="#identicaladdresses">IdenticalAddresses</a></h3>
<pre><code class="language-solidity">error IdenticalAddresses();
</code></pre>
<h3 id="insufficientlockuptime"><a class="header" href="#insufficientlockuptime">InsufficientLockupTime</a></h3>
<pre><code class="language-solidity">error InsufficientLockupTime();
</code></pre>
<h3 id="unauthorized"><a class="header" href="#unauthorized">Unauthorized</a></h3>
<pre><code class="language-solidity">error Unauthorized();
</code></pre>
<h3 id="notproject"><a class="header" href="#notproject">NotProject</a></h3>
<pre><code class="language-solidity">error NotProject();
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="project"><a class="header" href="#project">Project</a></h3>
<pre><code class="language-solidity">struct Project {
    bool isActive;
    bool isCompleted;
    address admin;
    uint128 totalAssetsSupplied;
    uint128 totalAssetsRepaid;
    string projectName;
    string masterAgreement;
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
